
/***********************************************************************************
* @file gpio.c
 * @brief:Initialise GPIO
 * @author Sayali Mule
 * @date 12/04/2021
 * @Reference:
 *
 *****************************************************************************/
//***********************************************************************************
//                              Include files
//***********************************************************************************
#include "MKL25Z4.h"
#include "gpio.h"

//***********************************************************************************
//                                  Macros
//***********************************************************************************
//***********************************************************************************
//                              Structures
//***********************************************************************************



//***********************************************************************************
//                                  Function definition
//***********************************************************************************


/*-----------------------------------------------------------------------------------------------------------------------------*/
/*
 @brief: Initialise GPIO peripheral
 @param: None
 @return:None
 */
/*-----------------------------------------------------------------------------------------------------------------------------*/


void gpio_init()
{
	//Enable clock to GPIO
	SIM->SCGC5 |=SIM_SCGC5_PORTD_MASK;// Enable clock to PORTD
	PORTD->PCR[0] |= PORT_PCR_MUX(1);//PTD0-> CS, ALT1 functionality
	GPIOD->PDDR |= GPIO_PDDR_PDD(1); //Set as output pin
	gpio_on(SPI_CS_PORT, SPI_CS_PIN); //Make CS default high
}

/*-----------------------------------------------------------------------------------------------------------------------------*/
/*
 @brief: Turn ON GPIO
 @param: None
 @return:None
 */
/*--------------------------------------------------------------------*/
void gpio_on(GPIO_Type* port, uint8_t pin)
{
	port->PSOR = (1 << pin);
}

/*-----------------------------------------------------------------------------------------------------------------------------*/
/*
 @brief: Turn OFF GPIO
 @param: None
 @return:None
 */
/*--------------------------------------------------------------------*/
void gpio_off(GPIO_Type* port, uint8_t pin)
{
	port->PCOR  = (1 << pin);
}
